input {
    redis {
        host => "sentilo-redis"
        data_type => "pattern_channel"
        key => "/*[data,order,alarm]/*"
    }
}
filter{
    # if([message] =~ /^([1-9,.]*)$/){
    #     mutate {
    #         convert => {
    #             "message" => "float"         
    #         }
    #         remove_field => "event"
    #     }
    # }
    mutate {
        gsub => [
            # replace the comma with a space in location field
            "location", "[ ]",","
        ]
        remove_field => "event"
    }
    json{
        source => "message"
    }
}
output{
    elasticsearch {
        hosts => "elasticsearch"
        index => "metrics-sentilo-%{+YYYY.MM.dd}"
        action => "create"
    }
}